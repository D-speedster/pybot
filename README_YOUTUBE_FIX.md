# راهنمای رفع خطای "Sign in to confirm you're not a bot" در یوتیوب

این راهنما به شما کمک می‌کند تا مشکل خطای "Sign in to confirm you're not a bot" را در هنگام دانلود از یوتیوب حل کنید.

## مراحل رفع مشکل

### 1. نصب کتابخانه‌های مورد نیاز

ابتدا کتابخانه‌های مورد نیاز را با اجرای دستور زیر نصب کنید:

```
python install_requirements.py
```

### 2. استخراج کوکی‌های مرورگر

برای استخراج کوکی‌های مرورگر خود، از دستور زیر استفاده کنید:

```
python extract_cookies.py --browser chrome --domain .youtube.com --output cookies.txt
```

**نکته مهم**: قبل از اجرای این دستور، اطمینان حاصل کنید که در مرورگر خود به یوتیوب وارد شده‌اید (لاگین کرده‌اید).

### 3. تست دانلود از یوتیوب

برای تست دانلود از یوتیوب با استفاده از کوکی‌ها و پروکسی، دستور زیر را اجرا کنید:

```
python test_youtube_with_cookies.py
```

## توضیحات فایل‌ها

- **install_requirements.py**: نصب کتابخانه‌های مورد نیاز
- **extract_cookies.py**: استخراج کوکی‌های مرورگر برای استفاده در yt-dlp
- **test_youtube_with_cookies.py**: تست دانلود از یوتیوب با استفاده از کوکی‌ها و پروکسی
- **cookies.txt**: فایل کوکی‌های استخراج شده از مرورگر

## عیب‌یابی

### اگر همچنان با خطا مواجه هستید:

1. اطمینان حاصل کنید که در مرورگر به یوتیوب لاگین هستید.
2. از مرورگر دیگری مانند Firefox یا Edge استفاده کنید:
   ```
   python extract_cookies.py --browser firefox --domain .youtube.com --output cookies.txt
   ```
3. پروکسی‌های جدیدتر و با کیفیت‌تر تهیه کنید.
4. اطمینان حاصل کنید که پروکسی‌ها در فرمت صحیح `socks4://IP:PORT` هستند.

## تغییرات اعمال شده در کد

1. افزودن پشتیبانی از کوکی‌های مرورگر در `download_service.py`
2. بهبود تنظیمات پروکسی برای پشتیبانی بهتر از SOCKS4
3. افزایش زمان انتظار برای اتصالات پروکسی
4. ایجاد اسکریپت‌های کمکی برای استخراج و استفاده از کوکی‌ها

## منابع بیشتر

- [راهنمای استفاده از کوکی‌ها در yt-dlp](https://github.com/yt-dlp/yt-dlp/wiki/FAQ#how-do-i-pass-cookies-to-yt-dlp)
- [نکات استخراج کوکی‌های یوتیوب](https://github.com/yt-dlp/yt-dlp/wiki/Extractors#exporting-youtube-cookies)